# 2025-01-17 (2주차 금요일) 회고

## Review

> * 2주차 미션5를 진행하였다.
>   1. Celenium을 사용하여 네이버 뉴스의 댓글을 크롤링한다.
>   2. 멀티 프로세싱/스레딩을 이용하여 ETL 프로세스를 병렬적으로 수행한다.
>   3. ETL 프로세스의 결과물로부터 Word Cloud를 만든다.

2번을 위해 필요한 코드들을 거의 작성하였고, 1번을 진행 중이다.
날짜별로 댓글이 많이 달린 기사들의 url을 csv 파일로 저장하는 부분까지는 완료했다..
(주말에 이어서 작업할 것이다.)

병렬 및 동시 처리를 위한 코드들을 작성하다 보니 신경써야 할 점이 많다는 것을 깨달았다.
특히 원자적으로 수행되어야 하는 연산들을 잘 파악하여 코드의 실행 동안 lock을 건다든지..

또한 코드 자체를 작성하면서 이러한 병렬성/동시성을 항상 염두에 둬야 한다는 점도 느꼈다.

예컨데.. csv 파일에 날짜별 Top 기사들의 url을 저장할 때, 일단은 단일 파일에 append 형식으로 저장하도록 했는데
다행히 csv 파일에 한 개의 row를 쓰는 행위는 원자적으로 잘 수행되었다.
다음으로, csv 파일이 없거나 비었을 때 첫 줄에 column들의 이름을 적기 위한 코드를 작성하려는데
문득 문제가 발생할 것이라는 점을 깨달았다.
이를 해결하기 위해서는 '파일이 없거나 비었을 때'를 확인하는 것과 'column 이름들을 삽입'하는 연산이 원자적으로 이뤄질 필요가 있었다.

물론 스레드 간 lock을 공유하는 등의 방법으로 별 고민 없이 해결할 수도 있겠지만, 다음과 같은 문제가 있다.

나는 애초에 스크래핑을 하는 코드와 병렬/동시 처리를 하는 코드를 분리하고 싶었는데,
앞선 기능을 구현하기 위해서는 스크래핑을 하는 함수 혹은 객체에 lock을 주입하여 이것을 이용하도록 하든가
아니면 column 명을 최초에 넣어주는 코드를 스크래핑과 분리하여 (lock을 걸든, 멀티 스레딩 시작 전에 수행하든)
동시성 문제가 발생하지 않도록 따로 처리를 해줘야 했다.

전자의 경우는 스크래핑을 하는 코드와 병렬/동시 처리를 하는 코드 간의 결합이 발생하게 되고
후자의 경우는 하나의 기능이 불필요하게 분산되는 문제가 생기게 된다.

일단 지금 시점에서 회고를 적으며 생각해보니 별 큰 문제는 아닌 것 같지만서도..
작성해 놓은 여러 인터페이스들도, 어딘가 결함이 있어 나중에 수정해야 할 일이 생기는 것이 아닐까 하는 막연한 걱정이 든다.

이 점에 대해서는 주말에 차차 생각을 해봐야겠다.

## Keep

* 코드를 잘 작성하기 위한 방법을 점점 익혀나가고 있다. 계속해서 새로운 시도를 해보며 최선의 방법을 찾아 나가자.

## Problem

* 금요일이 끝났는데 과제를 다 마치지 못했다.. 시간 관리를 더 잘 해야 한다.

## Try

* 고민하는 시간도 효율적으로 관리를 해야 한다. 이런 시간 조차 스케줄을 짜서 관리해보자.